odo 14/01/2025

---------------------------------------------- INTERCEPTORS -asociados al servicio HttpClient - ---------------------------------------------- objetos de angular q pueden modificar la solicitud HttpRequest q se manda por el servicio HttpClient y a su vez también procesar el objeto HttpResponse q se recibe desde el exterior antes q lo reciba el servicio HttpClient cliente angular servidor nodejs (servicio) servicios || Interceptors (HttpClient) -----> HttpRequest(original) |--> HttpRequest-modif --------> procesa la petición,genera respuesta HttpResponse(original)<---------222222222222222222222222222222------ HttpResponse HttpResponse(modif)<-------| los Interceptors se pueden encadenar (interceptors-chain), de tal forma q la petición se va pasando de uno a otro según el orden en la cadena, y la respuesta exactamente igual. Ahora h2222ay dos formas de generarse un interceptor en angular: - como una función typescript q recibe dos parámetros: request:HttpRequest <--- solicitud original a modificar por el interceptor next: HttpHandler <------- función q invoca siguiente interceptor en la cadena o manda la petición al exterior si no hay mas interceptors en la cadena - como objeto de una clase que implemente interface HttpInterceptor (forma de hacerlo hasta versiones anteriores a la v.18) con decorador @Injectable() para q pueda ser injectado por el DI de angular, q hay q definir con un token predefinido: HTTP_INTERCEPTORS Usos típicos de los interceptors: --------------------------------- - cuando quieres modificar/procesar la solicitud HttpRequest saliente: - para añadir cabeceras personalizadas, ej: cabecera de Autorización con JWT - para recuperar/almacenar en cache valores previamente solicitados en ese HttpRequestFn - cuando quieres procesar/modificar la respuesta HttpResponse entrante: - conversion de datos q viene en la respuesta externa a otro tipo de datos ej: recibes datos de un servicio en XML y los quieres convertir a JSON - crear logs de respuesta del servicio como generar un interceptor: ---------------------------- ng generate interceptor nombreInterceptor [-opciones] -------------- | con opción --functional crea interceptor como función

- - - 
